# ğŸ¯ Regras do Cursor - PM AI MVP

## ğŸ“ **Estrutura de Pastas e Contexto**

### **AplicaÃ§Ã£o/**
- **ConteÃºdo**: CÃ³digo fonte da aplicaÃ§Ã£o (backend FastAPI + frontend React)
- **Status**: âœ… MVP 100% estabilizado e funcional
- **PadrÃµes**: Seguir REQUISITOS.md para padrÃµes de cÃ³digo
- **Testes**: ğŸ§ª Infraestrutura 100% funcional, pronta para implementaÃ§Ã£o completa

### **Backlog/**
- **ConteÃºdo**: Requisitos, especificaÃ§Ãµes e backlog de funcionalidades
- **Documentos**: Frontend, requisitos de IA, especificaÃ§Ãµes tÃ©cnicas
- **Uso**: ReferÃªncia para desenvolvimento de novas features

### **Chats/**
- **ConteÃºdo**: HistÃ³rico de conversas e decisÃµes do projeto
- **Documentos**: Resumos, decisÃµes arquiteturais, contexto histÃ³rico
- **Uso**: Manter contexto e histÃ³rico de decisÃµes

### **documentaÃ§Ãµes/**
- **ConteÃºdo**: DocumentaÃ§Ã£o tÃ©cnica completa e organizada
- **Documentos**: README, REQUISITOS, SPEC, PRÃ“XIMOS_PASSOS, TESTES_*
- **Uso**: ReferÃªncia centralizada para desenvolvimento e manutenÃ§Ã£o
- **Ãndice**: `AplicaÃ§Ã£o/documentaÃ§Ãµes/ÃNDICE_DOCUMENTAÃ‡ÃƒO.md` para navegaÃ§Ã£o rÃ¡pida

---

## ğŸš€ **Status Atual do Projeto**

### **âœ… MVP Completamente Estabilizado**
- **Funcionalidade Core**: 100% operacional
- **API Backend**: CRUD completo para todas as entidades
- **Frontend**: Interface funcional e responsiva
- **Banco de Dados**: Modelos e relacionamentos implementados
- **Docker**: Ambiente containerizado e funcional

### **ğŸ§ª Infraestrutura de Testes 100% Funcional**
- **pytest + pytest-asyncio**: Configurado e operacional
- **Fixtures async**: Funcionando perfeitamente com isolamento
- **Banco de teste SQLite**: Em memÃ³ria e operacional
- **CriaÃ§Ã£o automÃ¡tica de tabelas**: Antes de cada teste
- **Isolamento completo**: Entre testes (cada teste tem banco limpo)

### **ğŸ”§ Problema RESOLVIDO**
O erro crÃ­tico `sqlalchemy.exc.OperationalError: no such table: projects` foi **completamente resolvido** atravÃ©s da correÃ§Ã£o do escopo dos fixtures e implementaÃ§Ã£o de isolamento automÃ¡tico entre testes.

---

## ğŸ”§ **PadrÃµes de Desenvolvimento**

### **Backend (FastAPI)**
- **Estrutura**: Seguir padrÃ£o modular em `AplicaÃ§Ã£o/backend/app/`
- **PadrÃµes**: RORO, Guard Clauses, tipagem completa, injeÃ§Ã£o de dependÃªncia
- **Testes**: Cobertura â‰¥85%, pytest, testes unitÃ¡rios e integraÃ§Ã£o
- **CÃ³digo**: Conciso, tÃ©cnico, modular, evitar duplicaÃ§Ã£o

### **Frontend (React)**
- **Estrutura**: Componentes em `AplicaÃ§Ã£o/frontend/src/components/`
- **PadrÃµes**: Componentes reutilizÃ¡veis, responsivos, tratamento de erros
- **IntegraÃ§Ã£o**: REST API com Axios, estado local com React hooks

### **Banco de Dados**
- **ORM**: SQLAlchemy 2.0 assÃ­ncrono
- **Migrations**: Alembic para versionamento
- **ExtensÃµes**: pgvector para embeddings futuros
- **PadrÃµes**: Ãndices otimizados, constraints adequadas

---

## ğŸ“š **DocumentaÃ§Ã£o de ReferÃªncia**

### **Para Desenvolvimento**
1. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md`** - PadrÃµes tÃ©cnicos e convenÃ§Ãµes
2. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/README.md`** - Setup e arquitetura da aplicaÃ§Ã£o
3. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/SPEC.md`** - EspecificaÃ§Ãµes do produto e funcionalidades

### **Para Roadmap**
1. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/PRÃ“XIMOS_PASSOS.md`** - Cronograma e prÃ³ximas fases
2. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/ESTRUTURA_PROJETO.md`** - OrganizaÃ§Ã£o e estrutura

### **Para Testes**
1. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/TESTES_GERAL.md`** - Status geral dos testes
2. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/TESTES_INTEGRACAO_STATUS.md`** - Status dos testes de integraÃ§Ã£o
3. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/TESTES_PERFORMANCE_STATUS.md`** - Status dos testes de performance

### **Para Contexto HistÃ³rico**
1. **`AplicaÃ§Ã£o/documentaÃ§Ãµes/CHAT_RESUMO.md`** - Resumo de decisÃµes e contexto
2. **`Chats/`** - HistÃ³rico completo de conversas

---

## ğŸ¯ **Prioridades de Desenvolvimento**

### **Fase Atual: ConsolidaÃ§Ã£o e Testes (1-2 semanas)**
- âœ… MVP estabilizado
- ğŸ§ª **PRÃ“XIMO PASSO**: Implementar testes completos para todos os modelos (2-3 horas)
- ğŸ”„ Testes de rotas da API
- ğŸ”„ ValidaÃ§Ã£o de schemas
- ğŸ”„ Testes de integraÃ§Ã£o

### **PrÃ³xima Fase: EvoluÃ§Ã£o Funcional (2-3 semanas)**
- ğŸ“Š Gantt e Kanban
- ğŸ“ Sistema de reuniÃµes
- ğŸ¤– Pipeline de IA com embeddings
- ğŸ“š Base de conhecimento vetorial

---

## ğŸ› ï¸ **Ferramentas e Comandos**

### **Desenvolvimento Local**
```bash
# Subir ambiente completo
docker compose up --build

# Apenas banco
docker compose up db -d

# Backend
docker compose up backend -d

# Frontend
docker compose up frontend -d
```

### **Testes e Qualidade**
```bash
# Backend
cd AplicaÃ§Ã£o/backend
python -m pytest
python -m ruff check app/
python -m ruff format app/

# Frontend
cd AplicaÃ§Ã£o/frontend
npm test
npm run lint
```

---

## ğŸ” **PadrÃµes de CÃ³digo EspecÃ­ficos**

### **Python/FastAPI**
- **Imports**: Relativos dentro do mÃ³dulo, absolutos entre mÃ³dulos
- **FunÃ§Ãµes**: `async def` para I/O, `def` para funÃ§Ãµes puras
- **ValidaÃ§Ã£o**: Pydantic v2 para schemas de entrada/saÃ­da
- **Erros**: HTTPException padronizado, middleware para 500

### **React/JavaScript**
- **Componentes**: Funcionais com hooks, props tipadas
- **Estado**: useState para local, Context para global
- **API**: Axios com interceptors para tratamento de erros
- **Roteamento**: React Router para navegaÃ§Ã£o

---

## ğŸ“Š **MÃ©tricas e Qualidade**

### **KPIs de Desenvolvimento**
- **Cobertura de testes**: â‰¥85% (pronto para implementaÃ§Ã£o)
- **LatÃªncia P95**: <300ms (rotas CRUD)
- **Disponibilidade**: 99.5% (produÃ§Ã£o)
- **Zero erros crÃ­ticos**

### **PadrÃµes de Qualidade**
- **Linting**: ruff, black, mypy
- **SeguranÃ§a**: bandit, dependabot
- **CI/CD**: GitHub Actions com testes automÃ¡ticos
- **Code Review**: 2 revisores para mudanÃ§as crÃ­ticas

---

## ğŸš¨ **Regras CrÃ­ticas**

### **Nunca Fazer**
- âŒ Commitar `.env` com secrets
- âŒ Quebrar compatibilidade da API sem versionamento
- âŒ Ignorar testes quebrados
- âŒ Deploy sem passar em todos os checks

### **Sempre Fazer**
- âœ… Seguir padrÃµes do `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md`
- âœ… Escrever testes para novas funcionalidades
- âœ… Documentar mudanÃ§as na API
- âœ… Validar schemas Pydantic
- âœ… Usar tipagem completa

---

## ğŸ”„ **Fluxo de Desenvolvimento**

### **Nova Feature**
1. **AnÃ¡lise**: Consultar `AplicaÃ§Ã£o/documentaÃ§Ãµes/SPEC.md` e Backlog/
2. **Desenvolvimento**: Seguir padrÃµes do `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md`
3. **Testes**: Cobertura â‰¥85%, testes de integraÃ§Ã£o
4. **Review**: Code review com 2 revisores
5. **Deploy**: Apenas apÃ³s todos os checks passarem

### **CorreÃ§Ã£o de Bugs**
1. **IdentificaÃ§Ã£o**: Reproduzir o problema
2. **CorreÃ§Ã£o**: Seguir padrÃµes existentes
3. **Teste**: Teste especÃ­fico para o bug
4. **ValidaÃ§Ã£o**: NÃ£o introduzir regressÃµes

---

## ğŸ“ˆ **EvoluÃ§Ã£o e ManutenÃ§Ã£o**

### **AtualizaÃ§Ãµes de DependÃªncias**
- **Pin de versÃµes**: Usar versÃµes especÃ­ficas
- **RevisÃ£o periÃ³dica**: Atualizar dependÃªncias desatualizadas
- **Testes**: Validar apÃ³s cada atualizaÃ§Ã£o
- **Rollback**: Plano de reversÃ£o documentado

### **Monitoramento**
- **Logs**: Estruturados em JSON com request_id
- **MÃ©tricas**: LatÃªncia, taxa de erro, uso de recursos
- **Alertas**: Baseados em SLOs definidos
- **Observabilidade**: OpenTelemetry para tracing

---

## ğŸ§ª **Status dos Testes**

### **âœ… Infraestrutura Base**
- **pytest + pytest-asyncio**: 100% configurado e operacional
- **Fixtures async**: Funcionando perfeitamente com isolamento
- **Banco de teste SQLite**: Em memÃ³ria e operacional
- **CriaÃ§Ã£o automÃ¡tica de tabelas**: Antes de cada teste
- **Isolamento completo**: Entre testes (cada teste tem banco limpo)

### **ğŸ“Š MÃ©tricas Atuais**
- **Testes Coletados**: 8
- **Testes Passando**: 5 âœ…
- **Testes Falhando**: 0 âŒ (RESOLVIDO!)
- **Cobertura**: Pronta para implementaÃ§Ã£o
- **Meta**: â‰¥85% (em implementaÃ§Ã£o)

### **ğŸ¯ PrÃ³ximo Passo CrÃ­tico**
**Implementar testes completos para todos os modelos** agora que a infraestrutura estÃ¡ 100% funcional.

**Tempo estimado**: 2-3 horas  
**Impacto**: Base sÃ³lida para evoluÃ§Ã£o funcional  
**Prioridade**: ğŸŸ¢ ALTA (nÃ£o mais bloqueadora)

---

## ğŸ‰ **Resumo**

Este arquivo de regras define o contexto completo do projeto PM AI MVP, incluindo:

1. **Estrutura de pastas** e seu propÃ³sito
2. **PadrÃµes de desenvolvimento** baseados em `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md`
3. **Prioridades atuais** conforme `AplicaÃ§Ã£o/documentaÃ§Ãµes/PRÃ“XIMOS_PASSOS.md`
4. **Status dos testes** com infraestrutura 100% funcional
5. **Ferramentas e comandos** para desenvolvimento
6. **Regras crÃ­ticas** para manter qualidade
7. **Fluxo de desenvolvimento** padronizado

**Sempre consultar os documentos de referÃªncia em `AplicaÃ§Ã£o/documentaÃ§Ãµes/` antes de iniciar desenvolvimento!**

---

## ğŸ“‹ **Documentos de ReferÃªncia RÃ¡pida**

| Documento | PropÃ³sito | Status |
|-----------|-----------|---------|
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/ÃNDICE_DOCUMENTAÃ‡ÃƒO.md` | **NavegaÃ§Ã£o rÃ¡pida por toda documentaÃ§Ã£o** | âœ… **NOVO** |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/README.md` | Setup e arquitetura | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md` | PadrÃµes tÃ©cnicos | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/SPEC.md` | EspecificaÃ§Ãµes do produto | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/PRÃ“XIMOS_PASSOS.md` | Roadmap e cronograma | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/TESTES_GERAL.md` | Status geral dos testes | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/ESTRUTURA_PROJETO.md` | OrganizaÃ§Ã£o do projeto | âœ… Atualizado |
| `AplicaÃ§Ã£o/documentaÃ§Ãµes/CHAT_RESUMO.md` | Contexto histÃ³rico | âœ… Atualizado |

# Kibana Configuration for PM AI MVP

# Server settings
server.name: kibana
server.host: 0.0.0.0
server.port: 5601
server.maxPayloadBytes: 1048576

# Elasticsearch settings
elasticsearch.hosts: ["http://elasticsearch:9200"]
elasticsearch.username: ""
elasticsearch.password: ""

# Security settings (disabled for development)
xpack.security.enabled: false
xpack.encryptedSavedObjects.encryptionKey: pm-ai-kibana-encryption-key-32-chars

# Monitoring settings
xpack.monitoring.enabled: true
xpack.monitoring.collection.enabled: true

# APM settings
xpack.apm.enabled: true

# Machine Learning settings
xpack.ml.enabled: true

# Reporting settings
xpack.reporting.enabled: true
xpack.reporting.kibanaServer.hostname: kibana
xpack.reporting.kibanaServer.port: 5601

# Canvas settings
xpack.canvas.enabled: true

# Maps settings
xpack.maps.enabled: true

# Logging settings
logging.appenders:
  file:
    type: file
    fileName: /usr/share/kibana/logs/kibana.log
    layout:
      type: json
logging.loggers:
  - name: http.server.response
    appenders: [file]
    level: error
  - name: security
    appenders: [file]
    level: error

# Performance settings
optimize.bundleFilter: "!tests"
optimize.useBundleCache: true
optimize.bundleDir: /usr/share/kibana/optimize/bundles

# UI settings
uiSettings.overrides:
  "dateFormat": "YYYY-MM-DD HH:mm:ss"
  "dateFormat:tz": "UTC"
  "defaultIndex": "pm-ai-logs-*"
  "discover:sampleSize": 100
  "discover:aggs:terms:size": 100

# Index patterns
kibana.defaultAppId: "discover"

# Saved objects
savedObjects.maxImportPayloadBytes: 26214400

# Data views
data.search.aggs.shardDelay.enabled: true

# Telemetry
telemetry.enabled: false
telemetry.optIn: false

# News feed
newsfeed.enabled: false

# Tutorials
tutorials.enabled: true

# Status page
status.allowAnonymous: true

# Development settings
dev.bundler.handler: "default"
dev.bundler.cache: true

# Plugin settings
plugins.scanDirs: ["/usr/share/kibana/plugins"]
plugins.initialize: true

# Paths
path.data: /usr/share/kibana/data
path.logs: /usr/share/kibana/logs

# Process settings
process.env.NODE_OPTIONS: "--max-old-space-size=2048"

# Custom settings for PM AI MVP
kibana.index: ".kibana"
kibana.defaultRoute: "/app/discover"

# Dashboard settings
dashboard.defaultDarkMode: false

# Time picker settings
timepicker:refreshIntervalDefaults:
  - display: "Off"
    pause: false
    value: 0
  - display: "5 seconds"
    pause: false
    value: 5000
  - display: "10 seconds"
    pause: false
    value: 10000
  - display: "30 seconds"
    pause: false
    value: 30000
  - display: "1 minute"
    pause: false
    value: 60000
  - display: "5 minutes"
    pause: false
    value: 300000
  - display: "15 minutes"
    pause: false
    value: 900000
  - display: "30 minutes"
    pause: false
    value: 1800000
  - display: "1 hour"
    pause: false
    value: 3600000
  - display: "24 hours"
    pause: false
    value: 86400000

# Query settings
query:queryString:options:
  analyze_wildcard: true
  default_field: "*"

# Search settings
search:includeFrozen: false

# Visualization settings
visualization:tileMap:maxZoom: 10
visualization:tileMap:minZoom: 1

# Watcher settings
watcher.enabled: true

# Alerting settings
alerting.enabled: true

# Actions settings
actions.enabled: true

# Cases settings
cases.enabled: true

# Rules settings
rules.enabled: true

# Connectors settings
connectors.enabled: true

# Stack management settings
stack_management.enabled: true

# Index management settings
index_management.enabled: true

# Snapshot and restore settings
snapshot_restore.enabled: true

# Cross-cluster replication settings
cross_cluster_replication.enabled: true

# Transform settings
transform.enabled: true

# Data streams settings
data_streams.enabled: true

# Searchable snapshots settings
searchable_snapshots.enabled: true

# Frozen indices settings
frozen_indices.enabled: true

# Spatial settings
spatial.enabled: true

# Analytics settings
analytics.enabled: true

# EQL settings
eql.enabled: true

# SQL settings
sql.enabled: true

# Rollup settings
rollup.enabled: true

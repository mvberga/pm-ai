# ğŸ“œ Regras do Projeto â€” PM AI MVP (Cursor)

**Data de CriaÃ§Ã£o:** 29 de Agosto de 2025  
**Ãšltima AtualizaÃ§Ã£o:** 29 de Agosto de 2025  
**VersÃ£o:** 1.0.0  
**Status:** âœ… Ativo

---

## ğŸš€ Status Atual do Projeto

### âœ… MVP Completamente Estabilizado
- Funcionalidade Core: 100% operacional
- API Backend: CRUD completo para todas as entidades
- Frontend: Interface funcional e responsiva
- Banco de Dados: Modelos e relacionamentos implementados
- Docker: Ambiente containerizado e funcional

### ğŸ§ª Infraestrutura de Testes 100% Funcional
- pytest + pytest-asyncio configurados
- Fixtures async com isolamento
- Banco de testes SQLite em memÃ³ria
- CriaÃ§Ã£o automÃ¡tica de tabelas por teste
- Isolamento completo entre testes

### ğŸ”§ Problema Resolvido
O erro `sqlalchemy.exc.OperationalError: no such table: projects` foi resolvido ajustando o escopo dos fixtures e o isolamento do banco em testes.

---

## ğŸ”§ PadrÃµes de Desenvolvimento

### Backend (FastAPI)
- Estrutura modular em `AplicaÃ§Ã£o/backend/app/`
- PrincÃ­pios: RORO, Guard Clauses, tipagem completa, DI
- Testes: cobertura alvo â‰¥ 85%; unitÃ¡rios e integraÃ§Ã£o
- CÃ³digo: conciso, tÃ©cnico, modular, sem duplicaÃ§Ã£o

### Frontend (React)
- Componentes em `AplicaÃ§Ã£o/frontend/src/components/`
- PadrÃµes: componentes reutilizÃ¡veis, responsivos, tratamento de erros
- IntegraÃ§Ã£o: REST API via Axios; estado com hooks/Context

### Banco de Dados
- ORM: SQLAlchemy 2.0 assÃ­ncrono
- Migrations: Alembic
- ExtensÃµes: `pgvector` para embeddings futuros
- PadrÃµes: Ã­ndices, constraints e integridade referencial

---

## ğŸ“š DocumentaÃ§Ã£o de ReferÃªncia
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md` â€” PadrÃµes tÃ©cnicos
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/README.md` â€” Setup e arquitetura
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/SPEC.md` â€” EspecificaÃ§Ãµes do produto
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/PRÃ“XIMOS_PASSOS.md` â€” Roadmap
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/TESTES_GERAL.md` â€” Status de testes
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/ESTRUTURA_PROJETO.md` â€” OrganizaÃ§Ã£o
- `AplicaÃ§Ã£o/documentaÃ§Ãµes/CHAT_RESUMO.md` â€” DecisÃµes e contexto

---

## ğŸ¯ Prioridades de Desenvolvimento

### Fase Atual: ConsolidaÃ§Ã£o e Testes (1â€“2 semanas)
- âœ… MVP estabilizado
- ğŸ§ª PrÃ³ximo passo: testes completos para todos os modelos (2â€“3h)
- ğŸ”„ Testes de rotas e validaÃ§Ã£o de schemas
- ğŸ”„ Testes de integraÃ§Ã£o

### PrÃ³xima Fase: EvoluÃ§Ã£o Funcional (2â€“3 semanas)
- ğŸ“Š Gantt e Kanban
- ğŸ“ Sistema de reuniÃµes
- ğŸ¤– Pipeline de IA com embeddings
- ğŸ“š Base de conhecimento vetorial

---

## ğŸ› ï¸ Ferramentas e Comandos

### Desenvolvimento Local
```bash
# Subir ambiente completo
cd AplicaÃ§Ã£o
docker compose up --build

# Apenas banco
docker compose up db -d

# Backend
docker compose up backend -d

# Frontend
docker compose up frontend -d
```

### Testes e Qualidade
```bash
# Backend
cd AplicaÃ§Ã£o/backend
python -m pytest
python -m ruff check app/
python -m ruff format app/

# Frontend
cd ../frontend
npm test
npm run lint
```

---

## ğŸ” PadrÃµes de CÃ³digo EspecÃ­ficos

### Python/FastAPI
- Imports: relativos no mÃ³dulo, absolutos entre mÃ³dulos
- FunÃ§Ãµes: `async def` para I/O, `def` para funÃ§Ãµes puras
- ValidaÃ§Ã£o: Pydantic v2
- Erros: `HTTPException` padronizado; middleware para 500

### React/JavaScript
- Componentes funcionais com hooks; props tipadas (TS)
- Estado: `useState`/`useReducer`; Context para global
- API: Axios com interceptors
- Roteamento: React Router

---

## ğŸ“Š MÃ©tricas e Qualidade
- Cobertura de testes: alvo â‰¥ 85%
- LatÃªncia P95: < 300 ms (rotas CRUD)
- Disponibilidade: 99.5% (prod)
- Zero erros crÃ­ticos

---

## ğŸš¨ Regras CrÃ­ticas

### Nunca Fazer
- âŒ Commitar `.env` com segredos
- âŒ Quebrar compatibilidade da API sem versionar
- âŒ Ignorar testes quebrados
- âŒ Deploy sem todos os checks verdes

### Sempre Fazer
- âœ… Seguir `AplicaÃ§Ã£o/documentaÃ§Ãµes/REQUISITOS.md`
- âœ… Escrever testes para novas features
- âœ… Documentar mudanÃ§as na API
- âœ… Validar schemas Pydantic
- âœ… Usar tipagem completa

---

## ğŸ”„ Fluxo de Desenvolvimento

### Nova Feature
1. Analisar requisitos em `SPEC.md` e `Backlog/`
2. Desenvolver conforme `REQUISITOS.md`
3. Escrever testes (alvo â‰¥ 85%)
4. Code review (2 revisores p/ mudanÃ§as crÃ­ticas)
5. Deploy apÃ³s checks

### CorreÃ§Ã£o de Bug
1. Reproduzir e isolar
2. Corrigir seguindo padrÃµes
3. Cobrir com teste
4. Validar sem regressÃµes

---

## ğŸ“ˆ EvoluÃ§Ã£o e ManutenÃ§Ã£o
- DependÃªncias pinadas; revisÃ£o periÃ³dica
- Testes apÃ³s atualizaÃ§Ã£o de libs
- Plano de rollback documentado
- Observabilidade e mÃ©tricas (OpenTelemetry â€“ futuro)

---

## ğŸ” SeguranÃ§a
- CORS restrito; JWT (RS256 em prod)
- Bandit/SCA; segredos via env/secret manager
- Logs estruturados sem PII; masking quando necessÃ¡rio

---

## ğŸ§­ UX/UI e Layout (Diretrizes resumidas)
- NavegaÃ§Ã£o hierÃ¡rquica por perfis: Executivo, Operacional, GP
- Sidebar colapsÃ¡vel + Header com busca/notificaÃ§Ãµes
- Grid responsivo; acessibilidade (teclado, ARIA, contraste)
- ComponentizaÃ§Ã£o (cards adaptativos; tabelas; grÃ¡ficos)
- Breakpoints: sm 640, md 768, lg 1024, xl 1280, 2xl 1536

---

## ğŸ“‹ Definition of Ready / Done
- Ready: escopo claro, critÃ©rios testÃ¡veis, riscos mapeados
- Done: testes verdes (â‰¥ 85%), logs/mÃ©tricas, docs atualizadas, migraÃ§Ãµes OK, release anotada

---

## ğŸ“ Contato
- Use o repositÃ³rio (issues/PRs) para dÃºvidas e mudanÃ§as